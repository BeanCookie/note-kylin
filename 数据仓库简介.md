# 数据仓库简介

#### 数据库和数据仓库

数据库主要用于处理基础业务的增删改查操作，其比较重要的特点是要支持事务。数据仓库主要应用主要是OLAP(On-Line Analytical Processing)，支持对大量数据进行分析操作，侧重决策支持并且提供直观易懂的查询结果。

#### 从数据库进化到数据仓库

以典型电商行业发展过程举例

- 电商早期启动非常容易，入行门槛低。找个外包团队，做了一个可以下单的网页前端 + 几台服务器 + 一个MySQL，就能开门迎客了这好比手工作坊时期。
- 第二阶段，流量来了，客户和订单都多起来了，普通查询已经有压力了，这个时候就需要升级架构变成多台服务器和多个业务数据库（量大+分库分表），这个阶段的业务数字和指标还可以勉强从业务数据库里查询。初步进入工业化。
- 第三个阶段，随着业务指数级的增长，数据量的会陡增，公司角色也开始多了起来，开始有了 CEO、CMO、CIO，大家需要面临的问题越来越复杂，越来越深入。高管们关心的问题，从最初非常粗放的：“昨天的收入是多少”、“上个月的 PV、UV 是多少”，逐渐演化到非常精细化和具体的用户的集群分析，特定用户在某种使用场景中，例如“20~30岁女性用户在过去五年的第一季度化妆品类商品的购买行为与公司进行的促销活动方案之间的关系”。

这类非常具体，且能够对公司决策起到关键性作用的问题，基本很难从业务数据库从调取出来。原因在于：

1. 业务数据库中的数据结构是为了完成交易而设计的，不是为了而查询和分析的便利设计的。
2. 业务数据库大多是读写优化的，即又要读（查看商品信息），也要写（产生订单，完成支付）。因此对于大量数据的读（查询指标，一般是复杂的只读类型查询）是支持不足的

此时我们就需要建立一个数据仓库用于解决上述问题：

1. 数据结构为了分析和查询的便利
2. 只读优化的数据库，即不需要它写入速度多么快，只要做大量数据的复杂查询的速度足够快就行了

#### 事实表与维度表

事实表指存储事实记录的表，如传感器，GPS相关数据表，事实表的记录会不断地动态增长，所以它的体积通常远大于其他表。

维度表的目的是将业务含义和上下文添加到数据仓库中的事实表中，它里面的数据应该是对事实表的各个方面描述，常见的维度表有地点表（包含国家、省／州、城市等属性），可以减小了事实表的大小，并且可以与多张事实表进行关联。

#### 常见数据模型

- 星型模型
- 雪花模型
- 事实星座模型